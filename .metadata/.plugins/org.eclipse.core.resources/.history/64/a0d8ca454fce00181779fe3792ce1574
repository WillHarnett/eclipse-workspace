package com.babbelapps.babbleapps_mobileautomation;

import org.openqa.selenium.By;
import org.openqa.selenium.Dimension;
import org.openqa.selenium.Rectangle;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.interactions.touch.TouchActions;

import io.appium.java_client.PerformsTouchActions;
import io.appium.java_client.TouchAction;
import io.appium.java_client.touch.WaitOptions;
import io.appium.java_client.touch.offset.PointOption;

import static io.appium.java_client.touch.WaitOptions.waitOptions;
import static io.appium.java_client.touch.offset.ElementOption.element;

import static java.time.Duration.ofSeconds;

import java.time.Duration;

import org.openqa.selenium.By;

public class AppiumBasicFunctions {
	
	GlobalVariables globalVariables = new GlobalVariables();
	
	public void tap(String idElement) {
		//MobileElement elementsOne = (MobileElement) globalVariables.driver.findElementsByAccessibilityId("SomeAccessibilityID");
		//List<MobileElement> elementsTwo = (MobileElement) globalVariables.driver.findElementsByClassName("SomeClassName");
		
		WebElement ref = globalVariables.driver.findElement(By.xpath("//XCUIElementTypeApplication[@name='my-recipes']/XCUIElementTypeWindow[1]/XCUIElementTypeOther/XCUIElementTypeOther/XCUIElementTypeOther/XCUIElementTypeOther/XCUIElementTypeOther/XCUIElementTypeOther/XCUIElementTypeTable/XCUIElementTypeCell[1]"));
		Rectangle rect = ref.getRect();
		int refElMidX = rect.getX() + rect.getWidth() / 2;
		int refElMidY = rect.getY() + rect.getHeight() / 2;

		// set the center point of our desired element; we know it is one row above the
		// reference element so we simply have to subtract the height of the reference element
		int desiredElMidX = refElMidX;
		int desiredElMidY = refElMidY - rect.getHeight();

		// perform the TouchAction that will tap the desired point
		TouchAction action = new TouchAction((PerformsTouchActions) globalVariables.driver);
		action.press(PointOption.point(desiredElMidX, desiredElMidY));
		action.waitAction(WaitOptions.waitOptions(Duration.ofMillis(500)));
		action.release();
		action.perform();
		
		 TouchAction swipe = new TouchAction((PerformsTouchActions) globalVariables.driver)
        .press(element(globalVariables.driver.findElement(By.xpath("//XCUIElementTypeApplication[@name='my-recipes']/XCUIElementTypeWindow[1]/XCUIElementTypeOther/XCUIElementTypeOther/XCUIElementTypeOther/XCUIElementTypeOther/XCUIElementTypeOther/XCUIElementTypeOther/XCUIElementTypeTable/XCUIElementTypeCell[1]"))))
        .waitAction(waitOptions(ofSeconds(1)))
        .release()
        .perform();		 
	}
}
